<!DOCTYPE html>
<html>
  <head>
    <title>Webcam - HTML5</title>
    <script src="js/jquery-1.9.1.min.js"></script>
    <script>
    //initialize the webcam video stream
    init = function () {
      console.log('initializing');
      videoElem = $('#webcam-view')[0];
      //videoElem = document.getElementById('webcam-view');
      if(navigator.webkitGetUserMedia) {
        navigator.webkitGetUserMedia({audio:true, video:true}, function(stream){
          console.log('Got userMedia');
          //videoElem = document.getElementsByClassName('video')[0];
          //create url for webcam data
          videoElem.src = window.webkitURL.createObjectURL(stream);

        }, function(e) {
          console.log('error getting userMedia');
          console.log(e);
        });
      } else {
        console.log('no navigator.webkitGetUserMedia');
      }
      //canvas = document.getElementById('draw');
      //canvasContext = canvas.getContext('2d');
    }

    $(function() {
      init();
    });
    //document.onload = init();

    </script>
  </head>
  <body>
    <div class="video">
      <video id="webcam-view" src="http://v2v.cc/~j/theora_testsuite/320x240.ogg" height="480px" width="640px" controls>
        <source>
      </video>
    </div>
    <div class="draw-canvas">
      <canvas id="draw"></canvas>
    </div>
  </body>
</html>